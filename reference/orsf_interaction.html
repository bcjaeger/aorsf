<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="ORSF interactions"><title>ORSF interactions — orsf_interaction • aorsf</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ORSF interactions — orsf_interaction"><meta property="og:description" content="ORSF interactions"><meta property="og:image" content="https://bcjaeger.github.io/aorsf/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">aorsf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/aorsf.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pd.html">Compute partial dependence with ORSF</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bcjaeger/aorsf/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ORSF interactions</h1>
      <small class="dont-index">Source: <a href="https://github.com/bcjaeger/aorsf/blob/HEAD/R/orsf_interaction.R" class="external-link"><code>R/orsf_interaction.R</code></a></small>
      <div class="d-none name"><code>orsf_interaction.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>ORSF interactions</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">orsf_interaction</span><span class="op">(</span><span class="va">object</span>, min_pairwise_obs <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>(<em>aorsf</em>) an oblique random survival forest (ORSF; see <a href="orsf.html">orsf</a>).</p></dd>
<dt>min_pairwise_obs</dt>
<dd><p>(<em>integer</em>) minimum number of observations
where both variables were included in a linear combination together.
The default is the number of trees in <code>object</code> divided by the mean
number of leaves in the trees. Default is the number of trees
divided by the average number of leaves per tree, rounded to the
nearest integer, i.e.,
<code>min_pairwise_obs = round(number of trees / mean(number of leaves))</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>data.frame</code> with pairwise interaction scores for each
pair of predictor variables in <code>object</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>min_pairwise_obs</code> should be a single value and should be large
enough to prevent consideration of variable pairs that are so infrequently
used together that it would not make sense to consider them interacting.
For example, if two variables are only used together in one split of
an entire random forest (i.e., number of pairwise observations = 1),
it would not make sense to compute a correlation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">329</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="orsf.html">orsf</a></span><span class="op">(</span><span class="va">pbc_orsf</span>, <span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">id</span>, n_tree <span class="op">=</span> <span class="fl">2500</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">intr</span> <span class="op">&lt;-</span> <span class="fu">aorsf</span><span class="fu">:::</span><span class="fu">orsf_interaction</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># edema==1 and bili are strongest interacting pair</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">intr</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             v1        v2        value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:   edema_1      bili 9.516179e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2: ascites_1      bili 8.722359e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3: ascites_1  hepato_1 8.607192e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:  hepato_1   edema_1 8.104954e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:   edema_1    copper 7.484794e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 149:   albumin      trig 2.276298e-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150:   albumin       ast 1.765690e-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 151:       age edema_0.5 1.683258e-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 152:   albumin  alk.phos 1.303141e-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 153: edema_0.5       ast 1.522985e-05</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># make a list containing the variable values you</span></span>
<span class="r-in"><span class="co"># want to compute partial dependence for</span></span>
<span class="r-in"><span class="va">pd_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>edema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="st">"0.5"</span>, <span class="st">"1"</span><span class="op">)</span>,</span>
<span class="r-in">                bili <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">7.1</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># orsf_pd_summary automatically computes pd for all combinations</span></span>
<span class="r-in"><span class="co"># in the list (this can be turned off with expand_grid = FALSE)</span></span>
<span class="r-in"><span class="va">pd_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="orsf_pd_summary.html">orsf_pd_summary</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">fit</span>,</span>
<span class="r-in">                           pd_spec <span class="op">=</span> <span class="va">pd_spec</span>,</span>
<span class="r-in">                           expand_grid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># aligning predictions at lowest value of bili</span></span>
<span class="r-in"><span class="va">min_ed_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">pd_data</span>, <span class="va">mean</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"0"</span>   <span class="op">&amp;</span> <span class="va">bili</span> <span class="op">==</span> <span class="fl">0.6</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-in"><span class="va">min_ed_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">pd_data</span>, <span class="va">mean</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"0.5"</span> <span class="op">&amp;</span> <span class="va">bili</span> <span class="op">==</span> <span class="fl">0.6</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-in"><span class="va">min_ed_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">pd_data</span>, <span class="va">mean</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"1"</span>   <span class="op">&amp;</span> <span class="va">bili</span> <span class="op">==</span> <span class="fl">0.6</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">pd_data_aligned</span> <span class="op">&lt;-</span></span>
<span class="r-in"> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">pd_data</span>, <span class="op">{</span></span>
<span class="r-in">  <span class="va">value</span> <span class="op">&lt;-</span> <span class="va">mean</span></span>
<span class="r-in">  <span class="va">value</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"0"</span> <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">value</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"0"</span> <span class="op">]</span> <span class="op">-</span> <span class="va">min_ed_0</span></span>
<span class="r-in">  <span class="va">value</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"0.5"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">value</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"0.5"</span><span class="op">]</span> <span class="op">-</span> <span class="va">min_ed_1</span></span>
<span class="r-in">  <span class="va">value</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"1"</span> <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">value</span><span class="op">[</span><span class="va">edema</span> <span class="op">==</span> <span class="st">"1"</span> <span class="op">]</span> <span class="op">-</span> <span class="va">min_ed_2</span></span>
<span class="r-in"> <span class="op">}</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pd_data_aligned</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    edema bili      mean        lwr      medn       upr       value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     0  0.6 0.2154799 0.01718182 0.1162081 0.7622311 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   0.5  0.6 0.2734275 0.04075219 0.1871151 0.7838840 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     1  0.6 0.3839478 0.16722234 0.3064889 0.8566843 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     0  1.1 0.2265615 0.02078347 0.1224758 0.7777483 0.011081691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:   0.5  1.1 0.2872575 0.04639360 0.1982758 0.7951350 0.013830014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:     1  1.1 0.3936647 0.17440193 0.3152310 0.8677766 0.009716911</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pd_data_aligned</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in"> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">bili</span>, y <span class="op">=</span> <span class="va">value</span>, col <span class="op">=</span> <span class="va">edema</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in"> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in"> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">'Predictions centered at Bilirubin = 0.6'</span>,</span>
<span class="r-in">      x <span class="op">=</span> <span class="st">'Bilirubin'</span>,</span>
<span class="r-in">      title <span class="op">=</span> <span class="st">'Interaction between bilirubin and edema'</span><span class="op">)</span></span>
<span class="r-plt img"><img src="orsf_interaction-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Byron Jaeger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

